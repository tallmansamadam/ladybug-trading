async fn generate_test_data(State(state): State<AppState>) -> StatusCode {
    state.logger.info("Test", "ðŸ§ª Generating randomized test data with stocks and crypto...");
    
    let mut rng = rand::thread_rng();
    
    // Generate test positions (stocks + crypto)
    let mut test_positions = state.test_positions.write().await;
    test_positions.clear();
    
    // Stock symbols with realistic price ranges
    let stocks = vec![
        ("AAPL", 150.0, 200.0, 10.0, 25.0),
        ("GOOGL", 120.0, 170.0, 5.0, 15.0),
        ("NVDA", 400.0, 600.0, 8.0, 30.0),
        ("TSLA", 180.0, 280.0, 8.0, 20.0),
        ("MSFT", 350.0, 450.0, 10.0, 20.0),
        ("AMZN", 140.0, 180.0, 8.0, 15.0),
    ];
    
    // Randomly select 4-6 stocks
    let num_stocks = rng.gen_range(4..=6);
    
    for (i, (symbol, min_price, max_price, min_qty, max_qty)) in stocks.iter().enumerate().take(num_stocks) {
        let entry_price = rng.gen_range(*min_price..*max_price);
        let price_change_pct = rng.gen_range(-8.0..12.0);
        let current_price = entry_price * (1.0 + price_change_pct / 100.0);
        let quantity = rng.gen_range(*min_qty..*max_qty);
        
        let pnl = (current_price - entry_price) * quantity;
        let pnl_percent = ((current_price - entry_price) / entry_price) * 100.0;
        let market_value = current_price * quantity;
        
        test_positions.push(Position {
            symbol: symbol.to_string(),
            quantity,
            entry_price,
            current_price,
            pnl,
            pnl_percent,
            market_value,
            asset_type: "stock".to_string(),
        });
    }
    
    // Crypto positions
    let cryptos = vec![
        ("BTC/USD", 85000.0, 105000.0, 0.05, 0.25),
